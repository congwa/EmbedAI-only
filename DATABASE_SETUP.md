# EmbedAI æ•°æ®åº“æœ¬åœ°éƒ¨ç½²æŒ‡å—

æœ¬é¡¹ç›®æä¾›äº†ä¸€å¥—å®Œæ•´çš„è„šæœ¬æ¥åœ¨æœ¬åœ° Docker ç¯å¢ƒä¸­éƒ¨ç½²æ‰€æœ‰éœ€è¦çš„æ•°æ®åº“æœåŠ¡ã€‚

## ğŸ“‹ åŒ…å«çš„æ•°æ®åº“æœåŠ¡

- **Milvus** (v2.4.15) - å‘é‡æ•°æ®åº“ï¼Œç”¨äºå­˜å‚¨å’ŒæŸ¥è¯¢æ–‡æ¡£å‘é‡
- **Neo4j** (v5.26.0) - å›¾æ•°æ®åº“ï¼Œç”¨äºå­˜å‚¨çŸ¥è¯†å›¾è°±
- **MinIO** (RELEASE.2024-12-18T13-15-44Z) - å¯¹è±¡å­˜å‚¨ï¼Œç”¨äºå­˜å‚¨æ–‡ä»¶
- **etcd** (v3.5.15) - åè°ƒæœåŠ¡ï¼ŒMilvus çš„ä¾èµ–æœåŠ¡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨æ•°æ®åº“æœåŠ¡

```bash
./start-databases.sh
```

è¯¥è„šæœ¬ä¼šï¼š
- æ£€æŸ¥ Docker ç¯å¢ƒ
- å¯åŠ¨æ‰€æœ‰æ•°æ®åº“æœåŠ¡
- ç­‰å¾…æœåŠ¡å¥åº·æ£€æŸ¥å®Œæˆ
- æ˜¾ç¤ºæœåŠ¡è®¿é—®ä¿¡æ¯

### 2. æ£€æŸ¥æœåŠ¡çŠ¶æ€

```bash
./check-databases.sh
```

æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼š
```bash
./check-databases.sh --logs
```

### 3. åœæ­¢æ•°æ®åº“æœåŠ¡

```bash
./stop-databases.sh
```

åœæ­¢æœåŠ¡å¹¶æ¸…ç†èµ„æºï¼š
```bash
./stop-databases.sh --cleanup
```

## ğŸ”Œ æœåŠ¡è®¿é—®ä¿¡æ¯

| æœåŠ¡ | è®¿é—®åœ°å€ | ç”¨æˆ·å/å¯†ç  | ç”¨é€” |
|------|----------|-------------|------|
| Milvus | localhost:10103 | - | å‘é‡æ•°æ®åº“ gRPC ç«¯ç‚¹ |
| Neo4j (HTTP) | http://localhost:10104 | neo4j/embedai123 | å›¾æ•°æ®åº“ Web ç•Œé¢ |
| Neo4j (Bolt) | bolt://localhost:10105 | neo4j/embedai123 | å›¾æ•°æ®åº“è¿æ¥ç«¯ç‚¹ |
| MinIO (API) | http://localhost:10106 | minioadmin/minioadmin123 | å¯¹è±¡å­˜å‚¨ API |
| MinIO (Console) | http://localhost:10107 | minioadmin/minioadmin123 | å¯¹è±¡å­˜å‚¨ç®¡ç†ç•Œé¢ |

## ğŸ“ æ–‡ä»¶è¯´æ˜

- `docker-compose-db.yml` - æ•°æ®åº“æœåŠ¡çš„ Docker Compose é…ç½®
- `start-databases.sh` - å¯åŠ¨æ•°æ®åº“æœåŠ¡çš„è„šæœ¬
- `stop-databases.sh` - åœæ­¢æ•°æ®åº“æœåŠ¡çš„è„šæœ¬
- `check-databases.sh` - æ£€æŸ¥æ•°æ®åº“æœåŠ¡çŠ¶æ€çš„è„šæœ¬

## ğŸ”§ å‰ç½®è¦æ±‚

- Docker å·²å®‰è£…å¹¶è¿è¡Œ
- Docker Compose å·²å®‰è£…
- ç«¯å£ 10103-10107 æœªè¢«å…¶ä»–æœåŠ¡å ç”¨

## ğŸ’¾ æ•°æ®æŒä¹…åŒ–

æ‰€æœ‰æ•°æ®åº“æ•°æ®éƒ½é€šè¿‡ Docker å·è¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨ï¼š

- `milvus_data` - Milvus æ•°æ®
- `etcd_data` - etcd æ•°æ®
- `neo4j_data` - Neo4j æ•°æ®åº“æ–‡ä»¶
- `neo4j_logs` - Neo4j æ—¥å¿—
- `minio_data` - MinIO å¯¹è±¡å­˜å‚¨æ•°æ®

## ğŸ› ï¸ å¸¸è§æ“ä½œ

### é‡å¯æ‰€æœ‰æœåŠ¡
```bash
./stop-databases.sh && ./start-databases.sh
```

### æŸ¥çœ‹æœåŠ¡æ—¥å¿—
```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çŠ¶æ€å’Œæœ€è¿‘æ—¥å¿—
./check-databases.sh --logs

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker logs embedai_milvus
docker logs embedai_neo4j
docker logs embedai_minio
```

### æ¸…ç†æ•°æ®ï¼ˆè°¨æ…æ“ä½œï¼‰
```bash
# åœæ­¢æœåŠ¡å¹¶æ¸…ç†æ‰€æœ‰æ•°æ®
./stop-databases.sh --cleanup
```

## ğŸ” æ•…éšœæ’é™¤

### æœåŠ¡å¯åŠ¨å¤±è´¥
1. æ£€æŸ¥ Docker æ˜¯å¦æ­£å¸¸è¿è¡Œï¼š`docker info`
2. æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼š`lsof -i :10103-10107`
3. æŸ¥çœ‹æœåŠ¡æ—¥å¿—ï¼š`./check-databases.sh --logs`

### å¥åº·æ£€æŸ¥è¶…æ—¶
- Milvus å¯åŠ¨éœ€è¦è¾ƒé•¿æ—¶é—´ï¼Œè¯·è€å¿ƒç­‰å¾…
- å¯ä»¥é€šè¿‡ `./check-databases.sh` æŒç»­ç›‘æ§æœåŠ¡çŠ¶æ€

### è¿æ¥é—®é¢˜
- ç¡®ä¿é˜²ç«å¢™æ²¡æœ‰é˜»æ­¢ç›¸å…³ç«¯å£
- æ£€æŸ¥æœåŠ¡æ˜¯å¦å®Œå…¨å¯åŠ¨ï¼š`./check-databases.sh`

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **é¦–æ¬¡å¯åŠ¨**ï¼šé¦–æ¬¡å¯åŠ¨å¯èƒ½éœ€è¦ä¸‹è½½é•œåƒï¼Œè€—æ—¶è¾ƒé•¿
2. **èµ„æºè¦æ±‚**ï¼šç¡®ä¿ç³»ç»Ÿæœ‰è¶³å¤Ÿçš„å†…å­˜å’Œç£ç›˜ç©ºé—´
3. **ç«¯å£å†²çª**ï¼šå¦‚æœç«¯å£è¢«å ç”¨ï¼Œå¯ä»¥ä¿®æ”¹ `docker-compose-db.yml` ä¸­çš„ç«¯å£æ˜ å°„
4. **æ•°æ®å¤‡ä»½**ï¼šé‡è¦æ•°æ®è¯·å®šæœŸå¤‡ä»½ Docker å·

## ğŸ”— ç›¸å…³é“¾æ¥

- [Milvus å®˜æ–¹æ–‡æ¡£](https://milvus.io/docs)
- [Neo4j å®˜æ–¹æ–‡æ¡£](https://neo4j.com/docs/)
- [MinIO å®˜æ–¹æ–‡æ¡£](https://min.io/docs/minio/linux/index.html)

---

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥æ—¥å¿—å¹¶å‚è€ƒç›¸å…³æ–‡æ¡£ï¼Œæˆ–è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚
